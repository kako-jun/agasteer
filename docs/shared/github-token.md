# GitHub Personal Access Tokenの取得

> AgasteerでGitHub連携を使用するために必要なPersonal Access Tokenの取得方法を説明します。

---

## 🔑 Personal Access Tokenとは？

Personal Access Token（個人アクセストークン）は、GitHubのAPIを使用するための認証情報です。

- パスワードの代わりに使用します
- 特定の権限（スコープ）のみを付与できます
- 有効期限を設定できます
- いつでも無効化・再生成できます

---

## 📝 トークンの取得手順

### 1. GitHub Settingsを開く

1. GitHubにログイン
2. 右上のプロフィールアイコンをクリック
3. 「Settings」を選択

または、直接以下のURLにアクセス：

[https://github.com/settings/tokens](https://github.com/settings/tokens)

### 2. Developer settingsを開く

1. 左サイドバーの一番下にある「Developer settings」をクリック
2. 「Personal access tokens」→「Tokens (classic)」を選択

### 3. 新しいトークンを生成

1. 「Generate new token」ボタンをクリック
2. 「Generate new token (classic)」を選択

### 4. トークンの設定

以下の項目を設定します：

#### Note（トークン名）

- わかりやすい名前を付けます
- 例: `Agasteer`、`My Notes App`

#### Expiration（有効期限）

推奨: **90日以上**

- 7日
- 30日
- 60日
- 90日
- カスタム（自分で日数を設定）
- 無期限（推奨しません）

#### Scopes（権限）

**必須**: `repo`にチェックを入れます

`repo`にチェックを入れると、以下のサブスコープすべてにチェックが入ります：

- `repo:status`
- `repo_deployment`
- `public_repo`
- `repo:invite`
- `security_events`

これにより、Agasteerはリポジトリに読み書きできるようになります。

**他のスコープは不要です。**

### 5. トークンを生成

1. 「Generate token」ボタンをクリック
2. トークンが表示されます

### 6. トークンをコピー

⚠️ **重要**: トークンは一度しか表示されません。

1. 表示されたトークンをコピーします
2. 安全な場所に保存してください（パスワードマネージャー推奨）
3. ページを離れると、二度と表示されません

形式: `ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`

---

## 🔐 トークンの管理

### トークンの確認

1. [https://github.com/settings/tokens](https://github.com/settings/tokens)にアクセス
2. 作成したトークンの一覧が表示されます
3. トークン名、有効期限、スコープを確認できます

### トークンの無効化

トークンが漏洩した場合や、使用しなくなった場合は無効化できます。

1. トークン一覧で対象のトークンを探す
2. 「Delete」ボタンをクリック
3. 確認ダイアログで「I understand, delete this token」をクリック

### トークンの再生成

トークンの値を忘れた場合や、定期的にローテーションする場合は再生成できます。

1. トークン一覧で対象のトークンを探す
2. 「Regenerate token」ボタンをクリック
3. 新しいトークンが生成されます
4. 新しいトークンをコピーして、Agasteerの設定を更新します

---

## ⚠️ セキュリティ上の注意

### トークンの取り扱い

- ✅ トークンは秘密情報として扱う
- ✅ パスワードマネージャーで管理する
- ✅ 定期的にトークンをローテーションする
- ✅ 使わなくなったトークンは無効化する
- ❌ トークンをコードにハードコードしない
- ❌ トークンをGitリポジトリにコミットしない
- ❌ トークンを他人と共有しない

### 推奨事項

1. **有効期限を設定する**: 90日以上の期限を設定し、定期的に更新
2. **最小限の権限**: `repo`スコープのみを付与
3. **信頼できる端末でのみ使用**: 共用端末では使用しない
4. **パスワードマネージャーで管理**: 安全に保存する

---

## 🛠️ トラブルシューティング

### トークンが見つからない

トークンの値を忘れた場合、再度表示することはできません。

**対策**: 新しいトークンを再生成してください。

### トークンが無効になった

以下の原因が考えられます：

1. 有効期限が切れた
2. トークンが削除された
3. GitHubアカウントのパスワードが変更された

**対策**: 新しいトークンを生成してください。

### "Bad credentials"エラー

トークンが正しくない可能性があります。

**対策**:

1. トークンを正しくコピーしたか確認
2. 余分なスペースが入っていないか確認
3. トークンの有効期限が切れていないか確認

### "Not Found"エラー

リポジトリ名が間違っている可能性があります。

**対策**:

1. リポジトリ名が`owner/repo`形式になっているか確認
2. リポジトリが存在するか確認
3. トークンに`repo`スコープが付与されているか確認

---

## 🎯 次のステップ

トークンを取得したら、Agasteerの設定画面で入力してください。

→ [初期設定とクイックスタート](../user-guide/getting-started.md)

---

**関連ドキュメント**:

- [GitHub連携](../user-guide/github-sync.md)
- [よくある質問（FAQ）](../user-guide/faq.md)
